---
// Top clients table component for dashboard
---

<div class="bg-white shadow rounded-lg p-6">
    <div class="flex items-center justify-between mb-6">
      <h3 class="text-lg font-medium text-gray-900">Users Entry</h3>
      <a href="#" class="text-sm text-indigo-600 hover:text-indigo-500 font-medium">View all</a>
    </div>
    
    <div class="mb-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
      <div class="flex items-center gap-2">
        <label for="table-search" class="text-sm text-gray-600">Search:</label>
        <input id="table-search" type="text" placeholder="Search by name, region..." class=" p-4 block w-64 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm">
      </div>
      <div class="flex items-center gap-2">
        <label for="page-size" class="text-sm text-gray-600">Rows per page:</label>
        <select id="page-size" class=" px-4 py-1.5 rounded-md border-0   text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm">
          <option value="5">10</option>
          <option value="10" selected>50</option>
          <option value="25">100</option>
        </select>
      </div>
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Full Name
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Region
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Province
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Prefecture
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                County
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
               Township
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200" id="data-rows">
          <!-- Client 1 -->
          <tr class="hover:bg-gray-50 border-slate-200">
            <td class="px-6 py-4 whitespace-nowrap ">
              <div class="flex items-center">
                <div class="flex-shrink-0 h-10 w-10">
                  <img class="h-10 w-10 rounded-full" src="image/user.png" alt="">
                </div>
                <div class="ml-4">
                  <div class="text-sm font-medium text-gray-900">Tenzin</div>
                  <div class="text-sm text-gray-500">Dolma</div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap  text-sm text-gray-900">
              Utsang
            </td>
            <td class="px-6 py-4 whitespace-nowrap ">
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                TAR
              </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap ">
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                Lhasa
              </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap ">
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                    Chushur County
                </span>
              </td>
            <td class="px-6 py-4 whitespace-nowrap ">
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                རྟ་དཀར་ཤང་།
            </span>
            </td>
          </tr>
  
          <!-- Client 2 -->
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 whitespace-nowrap ">
              <div class="flex items-center">
                <div class="flex-shrink-0 h-10 w-10">
                  <img class="h-10 w-10 rounded-full" src="image/user.png" alt="">
                </div>
                <div class="ml-4">
                  <div class="text-sm font-medium text-gray-900">Tenzin</div>
                  <div class="text-sm text-gray-500">Gyal</div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap  text-sm text-gray-900">
              Kham
            </td>
            <td class="px-6 py-4 whitespace-nowrap ">
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                Sichuan
              </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap ">
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
               Kardze TAP
              </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap ">
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                    Derge County
                </span>
              </td>
            <td class="px-6 py-4 whitespace-nowrap ">
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                རྫ་བར་མ་གྲོང་རྡལ། 
            </span>
            </td>
          </tr>
  
          <!-- Client 3 -->
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 whitespace-nowrap ">
              <div class="flex items-center">
                <div class="flex-shrink-0 h-10 w-10">
                  <img class="h-10 w-10 rounded-full" src="image/user.png" alt="">
                </div>
                <div class="ml-4">
                  <div class="text-sm font-medium text-gray-900">Ngawang Tashi</div>
                  <div class="text-sm text-gray-500">Tashi</div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap  text-sm text-gray-900">
              Amdo
            </td>
            <td class="px-6 py-4 whitespace-nowrap ">
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                Qinghai
              </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap ">
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                Golog TAP
              </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap ">
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                Darlak County
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap ">
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                Dewang
                </span>
              </td>
          </tr>
  
        </tbody>
      </table>
    </div>

    <div class="mt-4 flex flex-col items-center gap-3 sm:flex-row sm:justify-between">
      <div class="text-sm text-gray-600" id="pagination-summary">Showing 0–0 of 0</div>
      <div class="flex items-center gap-1" id="pagination-controls">
        <button id="page-prev" class="px-5 py-1 rounded-md border border-gray-300 text-sm text-gray-700 hover:bg-gray-50">Prev</button>
        <div id="page-buttons" class="flex items-center gap-1"></div>
        <button id="page-next" class="px-5 py-1 rounded-md border border-gray-300 text-sm text-gray-700 hover:bg-gray-50">Next</button>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const tbody = document.getElementById('data-rows');
        const allRows = Array.from(tbody.querySelectorAll('tr'));
        const searchInput = document.getElementById('table-search');
        const pageSizeSelect = document.getElementById('page-size');
        const pagePrev = document.getElementById('page-prev');
        const pageNext = document.getElementById('page-next');
        const pageButtons = document.getElementById('page-buttons');
        const summary = document.getElementById('pagination-summary');

        let currentPage = 1;
        let pageSize = parseInt(pageSizeSelect.value, 10);
        let filteredRows = [...allRows];

        function normalize(text) {
          return text.toLowerCase().replace(/\s+/g, ' ').trim();
        }

        function applyFilter() {
          const q = normalize(searchInput.value || '');
          if (!q) {
            filteredRows = [...allRows];
          } else {
            filteredRows = allRows.filter((row) => normalize(row.textContent).includes(q));
          }
          currentPage = 1;
          render();
        }

        function renderPagination(totalPages) {
          pageButtons.innerHTML = '';
          const maxButtons = 5;
          let start = Math.max(1, currentPage - Math.floor(maxButtons / 2));
          let end = Math.min(totalPages, start + maxButtons - 1);
          start = Math.max(1, end - maxButtons + 1);

          for (let p = start; p <= end; p++) {
            const btn = document.createElement('button');
            btn.textContent = String(p);
            btn.className = 'px-3 py-1 rounded-md border text-sm ' + (p === currentPage ? 'bg-indigo-600 text-white border-indigo-600' : 'border-gray-300 text-gray-700 hover:bg-gray-50');
            btn.addEventListener('click', () => {
              currentPage = p;
              render();
            });
            pageButtons.appendChild(btn);
          }

          pagePrev.disabled = currentPage <= 1;
          pageNext.disabled = currentPage >= totalPages;
          pagePrev.classList.toggle('opacity-50', pagePrev.disabled);
          pageNext.classList.toggle('opacity-50', pageNext.disabled);
        }

        function render() {
          const total = filteredRows.length;
          const totalPages = Math.max(1, Math.ceil(total / pageSize));
          currentPage = Math.min(currentPage, totalPages);

          allRows.forEach((r) => { r.style.display = 'none'; });

          const startIdx = (currentPage - 1) * pageSize;
          const endIdx = Math.min(startIdx + pageSize, total);
          for (let i = startIdx; i < endIdx; i++) {
            filteredRows[i].style.display = '';
          }

          const shownStart = total === 0 ? 0 : startIdx + 1;
          const shownEnd = endIdx;
          summary.textContent = `Showing ${shownStart}–${shownEnd} of ${total}`;

          renderPagination(totalPages);
        }

        searchInput.addEventListener('input', applyFilter);
        pageSizeSelect.addEventListener('change', () => {
          pageSize = parseInt(pageSizeSelect.value, 10);
          currentPage = 1;
          render();
        });
        pagePrev.addEventListener('click', () => {
          if (currentPage > 1) {
            currentPage--;
            render();
          }
        });
        pageNext.addEventListener('click', () => {
          const totalPages = Math.max(1, Math.ceil(filteredRows.length / pageSize));
          if (currentPage < totalPages) {
            currentPage++;
            render();
          }
        });

        render();
      });
    </script>
  </div>
  